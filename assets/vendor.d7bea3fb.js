function f(n){const{data:a}=n.getImageData(0,0,n.canvas.width,n.canvas.height),{width:h,height:i}=n.canvas;let c=[];for(let t=0;t<i;t++)for(let e=0;e<h;e++)c[e]||(c[e]=[]),c[e][t]={r:a[t*h*4+e*4],g:a[t*h*4+e*4+1],b:a[t*h*4+e*4+2],a:a[t*h*4+e*4+3]};return c}function l(n,a={}){const{crop:h=!0,size:i}=a;return new Promise(c=>{const t=new window.Image;t.onload=function(){const o=a.canvas||document.createElement("canvas"),g=o.getContext("2d");let s=1;i&&(s=i/Math.max(t.width,t.height)),a.maxSize&&(t.width>a.maxSize||t.height>a.maxSize)&&(s=a.maxSize/Math.max(t.width,t.height));const m=Math.floor(t.width*s),r=Math.floor(t.height*s);if(h){o.width=i,o.height=i;const d=Math.min(t.width,t.height);g.drawImage(t,(t.width-d)/2,(t.height-d)/2,d,d,0,0,i,i)}else o.width=m,o.height=r,g.drawImage(t,0,0,m,r);const w=g.getImageData(0,0,g.canvas.width,g.canvas.height);w.ctx=g,c(w)},t.src=n})}export{f as c,l as i};
